<header class="hdr {{- if .Params.transparent_nav }} hdr_Transparent{{ end -}}">
    <a href="/">
        {{- if .Params.transparent_nav  }}
        <picture>
            {{ $logo := resources.Get "img/full-logo_white_transparent.png" }}
            <source
                type="image/webp"
                srcset="{{ ($logo.Resize `200x q75 webp`).Permalink }} 200w,
                {{ ($logo.Resize `400x q75 webp`).Permalink }} 400w,
                {{ ($logo.Resize `600x q75 webp`).Permalink }} 600w">
            <img class="hdr-Logo_Transparent" src="{{ $logo.Permalink }}" 
                sizes="155px" width="155" height="48" alt="FivexL logo">
        </picture>
        <picture>
            {{ $logo := resources.Get "logo_medium.png" }}
            <source
                type="image/webp"
                srcset="{{ ($logo.Resize `200x q75 webp`).Permalink }} 200w,
                {{ ($logo.Resize `400x q75 webp`).Permalink }} 400w,
                {{ ($logo.Resize `600x q75 webp`).Permalink }} 600w">
            <img class="hdr-Logo" src="{{ $logo.Permalink }}" 
                sizes="155px" width="155" height="48" alt="FivexL logo">
        </picture>
        {{- else -}}
        <picture>
            {{ $logo := resources.Get "logo_medium.png" }}
            <source
                type="image/webp"
                srcset="{{ ($logo.Resize `200x q75 webp`).Permalink }} 200w,
                {{ ($logo.Resize `400x q75 webp`).Permalink }} 400w,
                {{ ($logo.Resize `600x q75 webp`).Permalink }} 600w">
            <img class="hdr-Logo" src="{{ $logo.Permalink }}" 
                sizes="155px" width="155" height="48" alt="FivexL logo">
        </picture>
        {{ end -}}
    </a>
    <button class="hdr-NavigationTrigger" aria-pressed="false">
        <svg class="hdr-NavigationTrigger_Menu" width="38" height="38" viewBox="0 0 38 38" xmlns="https://www.w3.org/2000/svg">
            <title>Open</title>
            <path class="h t" d="M10.5 10l17 0"/>
            <path d="M10.5 19l17 0"/>
            <path class="h b" d="M10.5 28l17 0"/>
            <path class="x" d="M19 10.5l0 17"/>
        </svg>
        <span>Menu</span>
    </button>
    <nav class="hdr-Navigation">
        <ul class="hdr-NavigationList">
            {{ range .Site.Menus.main }}
            {{ if not .Parent }}
            {{ if .HasChildren }}
            <li class="hdr-NavigationItem hdr-NavigationItem_Dropdown">
                <button class="hdr-NavigationDropdownToggle" aria-expanded="false">
                    {{ .Name }}
                    <svg class="hdr-NavigationDropdownIcon" width="12" height="8" viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 1l5 5 5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                    </svg>
                </button>
                <ul class="hdr-NavigationDropdown">
                    {{ range .Children }}
                    <li class="hdr-NavigationDropdownItem">
                        <a href="{{ absURL .URL }}">{{ .Name }}</a>
                    </li>
                    {{ end }}
                </ul>
            </li>
            {{ else }}
            <li class="hdr-NavigationItem">
                <a href="{{ absURL .URL }}" class="{{ with .Params.class }}{{ . }}{{ end }} {{- if or ($.IsMenuCurrent .Menu .) ($.HasMenuCurrent .Menu .) }} hdr-NavigationItem_Active{{ end -}}">{{ .Name }}</a>
            </li>
            {{ end }}
            {{ end }}
            {{ end }}
        </ul>
    </nav>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const dropdownToggles = document.querySelectorAll('.hdr-NavigationDropdownToggle');
        
        dropdownToggles.forEach(function(toggle) {
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
                console.log('Dropdown toggled:', isExpanded ? 'false' : 'true');
            });
        });
    });
    </script>
</header>

